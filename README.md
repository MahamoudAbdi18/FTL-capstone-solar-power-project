
# Solar Stacking API (FastAPI)

This repo serves a trained stacking regressor for `global_tilted_irradiance (W/m²)`.

## Files
- `train_pipeline.py` – trains and saves `model_stacking_pipeline.pkl`
- `app.py` – FastAPI app exposing `/predict` and `/health`
- `requirements.txt` – Python dependencies
- `Dockerfile` – container image to serve the API
- `model_stacking_pipeline.pkl` – (to be generated by running `train_pipeline.py`)

## Train (locally or on Kaggle)
```bash
pip install -r requirements.txt
python train_pipeline.py
```

## Run locally
```bash
uvicorn app:app --reload
# open http://127.0.0.1:8000/docs
```

## Docker
```bash
docker build -t solar-stacking .
docker run -p 8000:8000 solar-stacking
# open http://localhost:8000/docs
```

## Render (GitHub deploy)
- Build Command: `pip install -r requirements.txt`
- Start Command: `uvicorn app:app --host 0.0.0.0 --port 8000`
- Python: 3.11

## Example request
```json
{
  "time": "2025-08-09T12:00:00",
  "temperature_2m_c": 30,
  "relative_humidity_2m_pct": 40,
  "dew_point_2m_c": 15,
  "apparent_temperature_c": 32,
  "wind_speed_10m_kmh": 10,
  "wind_direction_10m_deg": 180,
  "cloud_cover_pct": 20
}
```
